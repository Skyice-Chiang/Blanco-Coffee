(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62006562"],{"13d5":function(t,a,e){"use strict";var r=e("23e7"),i=e("d58f").left,n=e("a640"),o=e("2d00"),s=e("605d"),c=n("reduce"),u=!s&&o>79&&o<83;r({target:"Array",proto:!0,forced:!c||u},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},1799:function(t,a,e){"use strict";var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("ul",{staticClass:"pagination"},[e("li",[e("a",{staticClass:"prev",class:{disabled:!t.page.has_pre},attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.updatePage(t.page.current_page-1)}}},[t._v(" ＜ ")])]),t._l(t.page.total_pages,(function(a,r){return e("li",{key:r},[e("a",{class:{active:t.page.current_page==a},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.updatePage(a)}}},[t._v(" "+t._s(a)+" ")])])})),e("li",[e("a",{class:{disabled:!t.page.has_next},attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.updatePage(t.page.current_page+1)}}},[t._v(" ＞ ")])])],2)])},i=[],n={props:["page"],methods:{updatePage:function(t){this.$emit("update",t)}}},o=n,s=(e("6e80"),e("2877")),c=Object(s["a"])(o,r,i,!1,null,"6496e6cf",null);a["a"]=c.exports},"6e80":function(t,a,e){"use strict";e("a19c")},"810a":function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:{"favor-set":0===t.favorId.length}},[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("div",{staticClass:"favor-banner"}),e("div",{staticClass:"container-fluid pb-4",class:{"favor-bg-color":0!==t.favorId.length}},[0===t.favorId.length?e("div",{staticClass:"text-center letter-spacing"},[e("div",{staticClass:"h5 text-white pt-5 mb-4"},[t._v(" 目前還沒有關注的項目，趕緊來去挑選吧! ")]),e("router-link",{staticClass:"btn btn-outline-secondary",attrs:{to:"/productlist/all"}},[t._v(" → 前往商品區 ")])],1):t._e(),e("div",{staticClass:"favor-content row"},t._l(t.favorProduct,(function(a,r){return e("ProductCard",{key:r,staticClass:"col-md-6 col-lg-4 col-xl-3",attrs:{favor:t.favorId,cart:t.carts,product:a}})})),1),0!==t.favorId.length?e("div",{staticClass:"d-flex justify-content-center mt-4"},[e("Pagination",{attrs:{page:t.pagination},on:{update:t.switchPage}})],1):t._e()])],1)},i=[],n=(e("4de4"),e("99af"),e("d716")),o=e("1799"),s={data:function(){return{products:[],isLoading:!1,pagination:{current_page:1,has_next:!0,has_pre:!1,total_pages:1},favorId:JSON.parse(localStorage.getItem("favorID"))||[],carts:JSON.parse(localStorage.getItem("carts"))||[]}},components:{ProductCard:n["a"],Pagination:o["a"]},watch:{$route:function(){this.pagination.current_page=1,this.pagination.has_next=!0,this.pagination.has_pre=!1}},computed:{favorProduct:function(){var t=this,a=[],e=t.favorId,r=t.pagination.current_page;t.$bus.$on("favorChange",(function(a){t.favorId=a}));var i=t.products.filter((function(t){if(-1!==e.indexOf(t.id))return t}));return t.pagination.total_pages=Math.ceil(i.length/9),1===t.pagination.total_pages&&(t.pagination.has_next=!1),a=i.filter((function(t,a){return a>=9*r-9&&a<=9*r-1})),a}},methods:{getProducts:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("blanco_coffee","/products/all");t.isLoading=!0,t.$http.get(a).then((function(a){t.products=a.data.products.reverse(),t.isLoading=!1}))},switchPage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pagination={current_page:t,has_next:this.pagination.total_pages>t,has_pre:this.pagination.total_pages-t<this.pagination.total_pages-1,total_pages:this.pagination.total_pages},window.scroll(0,0)}},created:function(){this.getProducts(),this.$bus.$emit("navActive","favor")},beforeDestroy:function(){this.$bus.$off("favorChange")}},c=s,u=e("2877"),l=Object(u["a"])(c,r,i,!1,null,null,null);a["default"]=l.exports},8418:function(t,a,e){"use strict";var r=e("c04e"),i=e("9bf2"),n=e("5c6c");t.exports=function(t,a,e){var o=r(a);o in t?i.f(t,o,n(0,e)):t[o]=e}},"99af":function(t,a,e){"use strict";var r=e("23e7"),i=e("d039"),n=e("e8b5"),o=e("861d"),s=e("7b0b"),c=e("50c4"),u=e("8418"),l=e("65f0"),d=e("1dde"),f=e("b622"),p=e("2d00"),g=f("isConcatSpreadable"),h=9007199254740991,v="Maximum allowed index exceeded",_=p>=51||!i((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),b=d("concat"),m=function(t){if(!o(t))return!1;var a=t[g];return void 0!==a?!!a:n(t)},C=!_||!b;r({target:"Array",proto:!0,forced:C},{concat:function(t){var a,e,r,i,n,o=s(this),d=l(o,0),f=0;for(a=-1,r=arguments.length;a<r;a++)if(n=-1===a?o:arguments[a],m(n)){if(i=c(n.length),f+i>h)throw TypeError(v);for(e=0;e<i;e++,f++)e in n&&u(d,f,n[e])}else{if(f>=h)throw TypeError(v);u(d,f++,n)}return d.length=f,d}})},a19c:function(t,a,e){},a434:function(t,a,e){"use strict";var r=e("23e7"),i=e("23cb"),n=e("a691"),o=e("50c4"),s=e("7b0b"),c=e("65f0"),u=e("8418"),l=e("1dde"),d=l("splice"),f=Math.max,p=Math.min,g=9007199254740991,h="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d},{splice:function(t,a){var e,r,l,d,v,_,b=s(this),m=o(b.length),C=i(t,m),x=arguments.length;if(0===x?e=r=0:1===x?(e=0,r=m-C):(e=x-2,r=p(f(n(a),0),m-C)),m+e-r>g)throw TypeError(h);for(l=c(b,r),d=0;d<r;d++)v=C+d,v in b&&u(l,d,b[v]);if(l.length=r,e<r){for(d=C;d<m-r;d++)v=d+r,_=d+e,v in b?b[_]=b[v]:delete b[_];for(d=m;d>m-r+e;d--)delete b[d-1]}else if(e>r)for(d=m-r;d>C;d--)v=d+r-1,_=d+e-1,v in b?b[_]=b[v]:delete b[_];for(d=0;d<e;d++)b[d+C]=arguments[d+2];return b.length=m-r+e,l}})},b474:function(t,a,e){"use strict";e("cbaa")},cbaa:function(t,a,e){},d58f:function(t,a,e){var r=e("1c0b"),i=e("7b0b"),n=e("44ad"),o=e("50c4"),s=function(t){return function(a,e,s,c){r(e);var u=i(a),l=n(u),d=o(u.length),f=t?d-1:0,p=t?-1:1;if(s<2)while(1){if(f in l){c=l[f],f+=p;break}if(f+=p,t?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:d>f;f+=p)f in l&&(c=e(c,l[f],f,u));return c}};t.exports={left:s(!1),right:s(!0)}},d716:function(t,a,e){"use strict";var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"product-card sale"},[e("div",{staticClass:"star",on:{click:function(a){return t.addFavor(t.product.id)}}},[-1!==t.favor.indexOf(t.product.id)?e("i",{staticClass:"fas fa-star"}):e("i",{staticClass:"far fa-star"})]),e("router-link",{staticClass:"no-underline",attrs:{to:"/singleProduct/"+t.product.id},nativeOn:{click:function(a){return t.scrollTop(a)}}},[e("div",{staticClass:"sale-text"},[t._v("特價中")]),e("div",{staticClass:"product-img"},[e("img",{attrs:{src:t.product.imageUrl,alt:""+t.product.title}})]),e("div",{staticClass:"product-title"},[t._v(t._s(t.product.title))]),e("div",{staticClass:"product-price"},[e("p",{staticClass:"delete mb-0"},[e("small",[t._v("NT "+t._s(t._f("currency")(t.product.origin_price)))])]),e("p",{staticClass:"mb-0 text-secondary"},[t._v(" 特價 NT "+t._s(t._f("currency")(t.product.price))+" ")])])]),e("div",{staticClass:"product-footer text-center"},[e("a",{staticClass:"btn btn-block text-white",on:{click:function(a){return t.addCart(t.product.title,t.product.id,1,t.product.price)}}},[t.isLoading?e("i",{staticClass:"fas fa-spinner fa-spin"}):e("i",{staticClass:"fas fa-shopping-cart mr-1"}),t._v(" 加入購物車 ")])])],1)])},i=[],n=(e("d81d"),e("4de4"),e("a434"),e("13d5"),{props:["product","cart","favor"],data:function(){return{isLoading:!1}},methods:{addCart:function(t,a){var e=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3?arguments[3]:void 0,n=this.cart,o=n.map((function(t){return t.id})),s={title:t,id:a,qty:r,price:i};this.isLoading=!0,-1!==o.indexOf(a)?(s.qty=n.filter((function(t){return t.id===a}))[0].qty+1,n.splice(o.indexOf(a),1),n.unshift(s)):-1===o.indexOf(a)&&n.unshift(s),this.$bus.$emit("message:push","成功加入購物車","success","fa-check-circle"),localStorage.setItem("carts",JSON.stringify(n));var c=this.cart.map((function(t){return t.qty})).reduce((function(t,a){return t+a}),0);this.$bus.$emit("changeNum",c),setTimeout((function(){e.isLoading=!1}),1e3)},addFavor:function(t){var a=this.favor,e=a.indexOf(t);-1===e?a.unshift(t):a.splice(e,1),localStorage.setItem("favorID",JSON.stringify(a)),this.$bus.$emit("favorChange",JSON.parse(localStorage.getItem("favorID")))},scrollTop:function(){window.scroll(0,0)}}}),o=n,s=(e("b474"),e("2877")),c=Object(s["a"])(o,r,i,!1,null,"16ad8e32",null);a["a"]=c.exports},d81d:function(t,a,e){"use strict";var r=e("23e7"),i=e("b727").map,n=e("1dde"),o=n("map");r({target:"Array",proto:!0,forced:!o},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-62006562.43c3ea0a.js.map